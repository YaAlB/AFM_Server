# Asset Finance Management API - Backend Documentation

## Table of Contents
1. **Introduction**
2. **Project Overview**
3. **Backend Technologies**
4. **Getting Started**
5. **Authentication**
6. **API Endpoints**
7. **Database**
8. **Logging and Monitoring**

## 1. Introduction
Welcome to the documentation for the backend of the "Asset Finance Management API." This document provides an overview of the backend components, technologies, and how to get started with the project.

## 2. Project Overview
"AFM" aims to provide a web-based platform for users to apply for asset finance. The project involves both frontend and backend development with a focus on a MERN (MongoDB, Express.js, React, Node.js) stack. This documentation focuses on the backend aspect of the project.

## 3. Backend Technologies
The backend of the Asset Finance Management Platform is built using the following technologies:
- **Node.js**: A JavaScript runtime for server-side development.
- **Express.js**: A web application framework for building RESTful APIs.
- **MongoDB**: A NoSQL database used to store user and finance application data.
- **Mongoose**: An Object Data Modeling (ODM) library for MongoDB.

## 4. Getting Started
To set up the backend of the project, follow these steps:
1. Clone the project repository.
2. Navigate to the 'server' directory.
3. Run `npm install` to install the required dependencies.
4. Configure the MongoDB connection in a `.env` file.
    `NODE_ENV=development`
    `DATABASE_URI=Mongodb API key`
    `PORT=5500`
    `ACCESS_TOKEN_SECRET=3a65a2a53d59cd4b6da9f7efb4011780c107efc86d5ec5e0741e39d559df37c09bf799a4559abfa25fededd54786964910126da623119d5164acf7fc8a2857ad`
    `REFRESH_TOKEN_SECRET=30067da3d329851283a7c4cb9a15038c3d9de376ea98924a5f8c868a5b8343376b1271ea6b7b8fe31d44619a6f696aa1b83e6e56e8ad6b170f9f2e2686a4eb03`
5. Start the server using `node server`.

## 5. Authentication and Authorization (JWT)
The backend of the Asset Finance Management Platform uses JWT (JSON Web Tokens) for secure authentication and authorization. JWT is a widely adopted method for token-based user authentication.

### 5.1. Authentication
- Users can register using the `/auth/register` endpoint, providing their credentials.
- To log in, users can make a POST request to the `/auth/login` endpoint, providing their username and password.
- Upon successful login, the backend generates an access token and a refresh token. The access token is used for authorization, and the refresh token is used for obtaining new access tokens when they expire.

### 5.2. Authorization
- The backend ensures that authenticated users have the necessary permissions to access certain resources.
- Authorization is implemented on specific API endpoints, such as `/applications`, to ensure that users can only access their own finance applications.

### 5.3. JWT Tokens
- The access token is a short-lived token (e.g., with a 15-minute expiry) that provides secure access to protected routes.
- When the access token expires, users can use the refresh token to obtain a new access token. This prevents the need to re-enter login credentials frequently.

## 6. API Endpoints
- Authentication and authorization middleware is implemented in relevant API endpoints to secure access.
- Ensureing that only authenticated and authorized users can access sensitive resources and routes.

## 6. API Endpoints
The API provides endpoints for CRUD operations related to finance applications. The following API routes are available:
- `POST /auth/register`: Register a new user.
- `POST /auth/login`: Log in an existing user.
- `GET /applications`: Get a list of finance applications for the logged-in user.
- `POST /applications`: Create a new finance application.
- `PATCH /applications`: Update a specific finance application by ID
- `DELETE /applications`: Delete a specific finance application by ID (sent from the cookie)
- `GET /user`: Get a user info for logged-in user

## 7. Database
The project uses a MongoDB serverless cluster to store user and finance application data. The backend service integrates with this database connection using Mongoose.

## 8. Logging and Monitoring
To track application usage and errors, logging and monitoring logs are added. This will help in debugging and improving the application's performance.